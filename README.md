# Квест‑визард (офлайн)

Одностраничный офлайн‑квест для ребёнка: шаги, ответы, подсказки и финальная победа.

## Запуск

1. Откройте `index.html` двойным кликом или перетащите файл в браузер.
2. Всё работает без сервера и без сборки.

## Публикация в интернет (GitHub Pages)

1. Переименуйте `steps.example.json` в `steps.json` и заполните своими шагами.
2. Закоммитьте изменения и отправьте их в репозиторий на GitHub.
3. В репозитории откройте **Settings → Pages** и выберите **Source: GitHub Actions**.
4. Дождитесь выполнения workflow **Deploy to GitHub Pages**.
5. Ссылка на опубликованную страницу появится в разделе **Pages** и в списке деплоев workflow.

После этого страница будет открываться по публичному URL отовсюду.

> Можно смотреть промежуточные результаты без мержа: просто пушьте изменения в свою ветку —
> workflow запустится и опубликует текущую версию. URL останется тем же, но будет содержать
> самую свежую деплой‑версию.

## Настройка шагов

1. Переименуйте `steps.example.json` в `steps.json`.
2. Отредактируйте `steps.json` под свой квест.
3. Если открываете страницу как `file://`, браузеры блокируют чтение `steps.json`.
   Чтобы подхватить файл, запустите простой локальный сервер или откройте страницу по HTTP.

### Формат `steps.json`

```json
{
  "steps": [
    {
      "id": "unique-id",
      "title": "Шаг 1: ...",
      "subtitle": "...",
      "prompt": "Текст задания",
      "input": {
        "type": "text",
        "placeholder": "Напиши ответ",
        "inputMode": "text"
      },
      "answers": ["вариант1", "вариант2"],
      "allowRegex": false,
      "hint": "Подсказка",
      "hintAfterTries": 2,
      "successMessage": "Что делать дальше",
      "collectToken": "3",
      "isFinal": false
    }
  ]
}
```

- Ответы сравниваются так: `trim + lowerCase`.
- Если `allowRegex: true`, ответы трактуются как регулярные выражения.
- Если хотя бы один шаг содержит `collectToken`, показывается строка «Собрано».

## Сброс прогресса

- В интерфейсе нажмите **«Сброс (для родителей)»** и введите PIN.
- Автоматический сброс: добавьте `?reset=1` к адресу страницы.

PIN по умолчанию хранится в `app.js` (`PARENT_PIN`).
